<!DOCTYPE html>
<html>
<head>
  <title>MQTT Test Page</title>
  <script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>
</head>
<body>
  <h2>ðŸ“¡ Raspberry Pi MQTT via Cloudflare Tunnel</h2>
  <div>
    <strong>Received Number:</strong> <span id="msg">None</span>
  </div>
  <input type="number" id="inputVal" placeholder="Enter number" />
  <button onclick="send()">Send to Pi</button>

  <script>
    const client = mqtt.connect("wss://austin-meetup-activated-marilyn.trycloudflare.com");

    client.on("connect", () => {
      console.log("âœ… Connected to MQTT broker");
      client.subscribe("fromPi");
    });

    client.on("message", (topic, message) => {
      if (topic === "fromPi") {
        document.getElementById("msg").textContent = message.toString();
      }
    });

    function send() {
      const val = document.getElementById("inputVal").value;
      client.publish("toPi", val);
    }
  </script>
</body>
</html>
